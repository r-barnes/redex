"use strict";(self.webpackChunkstaticdocs_starter=self.webpackChunkstaticdocs_starter||[]).push([[752],{3905:function(e,t,n){n.r(t),n.d(t,{MDXContext:function(){return s},MDXProvider:function(){return c},mdx:function(){return f},useMDXComponents:function(){return u},withMDXComponents:function(){return p}});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(this,arguments)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){return function(t){var n=u(t.components);return o.createElement(e,i({},t,{components:n}))}},u=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,a=e.parentName,s=d(e,["components","mdxType","originalType","parentName"]),p=u(n),c=r,h=p["".concat(a,".").concat(c)]||p[c]||m[c]||i;return n?o.createElement(h,l(l({ref:t},s),{},{components:n})):o.createElement(h,l({ref:t},s))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=h;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var s=2;s<i;s++)a[s]=n[s];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},98323:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return d},default:function(){return m},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return u}});var o=n(83117),r=n(80102),i=(n(67294),n(3905)),a=["components"],l={id:"faq",title:"FAQ"},d=void 0,s={unversionedId:"help/faq",id:"help/faq",title:"FAQ",description:"I'm getting \"Couldn't find zipalign. See README.md to resolve this.\" or other zipalign errors",source:"@site/docs/help/faq.md",sourceDirName:"help",slug:"/help/faq",permalink:"/docs/help/faq",draft:!1,tags:[],version:"current",frontMatter:{id:"faq",title:"FAQ"},sidebar:"tutorialSidebar",previous:{title:"Interdex",permalink:"/docs/technical_details/interdex"}},p={},u=[{value:"I&#39;m getting &quot;Couldn&#39;t find zipalign. See README.md to resolve this.&quot; or other zipalign errors",id:"im-getting-couldnt-find-zipalign-see-readmemd-to-resolve-this-or-other-zipalign-errors",level:2},{value:"My app fails to install with <code>Failure [INSTALL_PARSE_FAILED_NO_CERTIFICATES]</code>",id:"my-app-fails-to-install-with-failure-install_parse_failed_no_certificates",level:2},{value:"My App crashes with <code>MethodNotFoundException</code>, <code>ClassNotFoundException</code>, <code>NoSuchFieldException</code>, or something similar. How do I fix this?",id:"my-app-crashes-with-methodnotfoundexception-classnotfoundexception-nosuchfieldexception-or-something-similar-how-do-i-fix-this",level:2},{value:"How does this compare to ProGuard?",id:"how-does-this-compare-to-proguard",level:2},{value:"How about DexGuard?",id:"how-about-dexguard",level:2}],c={toc:u};function m(e){var t=e.components,n=(0,r.Z)(e,a);return(0,i.mdx)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h2",{id:"im-getting-couldnt-find-zipalign-see-readmemd-to-resolve-this-or-other-zipalign-errors"},"I'm getting \"Couldn't find zipalign. See README.md to resolve this.\" or other zipalign errors"),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"zipalign")," is an optimization step that is bundled with the Android SDK.  You\nneed to tell redex where to find it.  For example, if you installed the SDK at\n",(0,i.mdx)("inlineCode",{parentName:"p"},"/path/to/android/sdk"),", try:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"ANDROID_SDK=/path/to/android/sdk redex [... arguments ...]\n")),(0,i.mdx)("p",null,"You can alternatively add ",(0,i.mdx)("inlineCode",{parentName:"p"},"zipalign")," to your PATH, for example:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"PATH=/path/to/android/sdk/build-tools/xx.y.zz:$PATH redex [... arguments ...]\n")),(0,i.mdx)("p",null,"Additionally, it's possible zipalign itself failed. In this case the stderr will be reported to aid debugging (for example, zipalign fails if you provide an output path that already exists)."),(0,i.mdx)("h2",{id:"my-app-fails-to-install-with-failure-install_parse_failed_no_certificates"},"My app fails to install with ",(0,i.mdx)("inlineCode",{parentName:"h2"},"Failure [INSTALL_PARSE_FAILED_NO_CERTIFICATES]")),(0,i.mdx)("p",null,"After you run redex, you will need to re-sign your app.  You can re-sign manually\nusing these instructions:\n",(0,i.mdx)("a",{parentName:"p",href:"https://developer.android.com/tools/publishing/app-signing.html#signing-manually"},"https://developer.android.com/tools/publishing/app-signing.html#signing-manually"),"."),(0,i.mdx)("p",null,"You can also tell redex to sign for you.  If you want to sign with the debug\nkey, you can simply do:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"redex --sign [ ... arguments ...]\n")),(0,i.mdx)("p",null,"If you want to sign with your release key, you'll need to provide the\nappropriate args:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"--sign Sign the apk after optimizing it\n-s [KEYSTORE], --keystore [KEYSTORE]\n-a [KEYALIAS], --keyalias [KEYALIAS]\n-p [KEYPASS], --keypass [KEYPASS]\n")),(0,i.mdx)("h2",{id:"my-app-crashes-with-methodnotfoundexception-classnotfoundexception-nosuchfieldexception-or-something-similar-how-do-i-fix-this"},"My App crashes with ",(0,i.mdx)("inlineCode",{parentName:"h2"},"MethodNotFoundException"),", ",(0,i.mdx)("inlineCode",{parentName:"h2"},"ClassNotFoundException"),", ",(0,i.mdx)("inlineCode",{parentName:"h2"},"NoSuchFieldException"),", or something similar. How do I fix this?"),(0,i.mdx)("p",null,"Redex probably deleted or renamed it. Redex is quite aggressive about deleting\nthings it deems are unreachable. But, often Redex doesn't know about reflection\nor other complex ways an entity could be reached."),(0,i.mdx)("p",null,"Here's how you ensure Redex will not delete or rename something:"),(0,i.mdx)("p",null,"Annotate any class, method, or field you want to keep with ",(0,i.mdx)("inlineCode",{parentName:"p"},"@DoNotStrip"),", and\nadd this to your ProGuard config file (which should be passed to redex.py via\nthe ",(0,i.mdx)("inlineCode",{parentName:"p"},"--proguard-config")," flag):"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"# Do not strip classes annotated with @DoNotStrip\n-keep @com.path.to.your.DoNotStrip class *\n# Do not strip annotated fields or methods either\n-keepclassmembers class * {\n    @com.path.to.your.DoNotStrip *;\n}\n")),(0,i.mdx)("p",null,"and define ",(0,i.mdx)("inlineCode",{parentName:"p"},"DoNotStrip"),":"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"package com.path.to.your;\npublic @interface DoNotStrip {}\n")),(0,i.mdx)("h2",{id:"how-does-this-compare-to-proguard"},"How does this compare to ProGuard?"),(0,i.mdx)("p",null,"ReDex is conceptually similar to ProGuard, in that both optimize bytecode.\nReDex, however, optimizes .dex bytecode, while ProGuard optimizes .class\nbytecode before it is lowered to .dex.  Operating on .dex is sometimes an\nadvantage: you can consider the number of virtual registers used by a method\nthat is an inlining candidate, and you can control the layout of classes within\na dex file.  But ProGuard has some capabilities that ReDex does not (for\nexample, ReDex will not remove unused method parameters, which ProGuard does)."),(0,i.mdx)("h2",{id:"how-about-dexguard"},"How about DexGuard?"),(0,i.mdx)("p",null,"DexGuard operates on dex, but we haven't evaluated it at all since it's closed\nsource.  We don't use it at Facebook and we have no plans to start."))}m.isMDXComponent=!0}}]);